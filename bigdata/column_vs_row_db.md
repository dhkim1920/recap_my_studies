
# 열기반 vs 행기반 정리

## 열 기반 요약
### 구조
- 데이터 Column 단위로 저장, 같은 Column 끼리 연속 저장한다. 
- Column 별로 파일에 저장된다. (이건 어떤걸 사용하느냐에 따라 좀 다를수 있다.)

### 장점
- 특정 열만 조회할 때 매우 빠르다.
  - 불필요하게 Row 전체를 읽지 않아 I/O가 최소화
- 데이터 패턴이 유사해 압축 효율이 좋다.
  - 데이터 유사성: 각 열에는 동일한 데이터 유형이 저장되며, 값들이 유사하거나 반복되는 경향이 있다.
    - 예) '성별'은 '남' 또는 '여'와 같은 값이 반복된다.
  - 압축 알고리즘의 적용: 이러한 유사한 데이터 패턴은 압축 알고리즘이 효율적으로 작동할 수 있는 환경을 제공한다. 
    - 예) Run-Length Encoding(RLE)은 반복되는 값을 효율적으로 압축한다.
  - 저장 공간 절약: 열 단위로 데이터를 저장하고 압축함으로써 전체 데이터베이스의 저장 공간을 절약할 수 있다.
- 대규모 분석, 집계 쿼리에 최적화
  - 필요한 Column만 읽고 계산하니 전체 Row를 읽는 Row 기반보다 훨씬 빠르다.

### 단점
- 전체 Row 읽기 비효율적
  - 한 Row를 구성하는 여러 Column들이 서로 다른 저장 위치에 분리돼있어 Row 조립 비용이 발생한다.
- 쓰기 작업 느릴 수 있음
  - Row 전체를 동시에 저장하기 어렵다. 또한 Column 별로 저장해야하니 디스크 추가 작업이 발생
- 트랜잭션 처리 약함
  - 데이터가 Column 단위로 분산되어 있어 ACID 보장(특히 원자성, 일관성) 처리에 부하가 크다.
  - 복잡한 락(lock)이나 버퍼링 처리가 필요해 트랜잭션 성능이 떨어진다.

### 대표적인 열기반 DBMS
- HBase (세미 컬럼형)
- Cassandra (와이드 컬럼 스토어)
- ClickHouse
- Apache Kudu
- Bigtable (GCP)

### 참고) HBase 특징
- 완전한 Column 기반이 아니다.
- 왜?
  - Column Family 단위로 묶어 저장하는 하이브리드 구조이기 때문

---
## 행 기반 요약
### 구조
- 데이터 Row 단위로 저장
- 하나의 Row 전체를 한 번에 저장

### 대표 예시
- MySQL
- PostgreSQL
- Oracle
- SQL Server

### 장점
- 단일 Row 읽기/쓰기 매우 빠름
- 트랜잭션 처리 강력
- 쓰기 작업 빠름

### 단점
- 대량 분석/집계 쿼리 성능 저하
- 압축률 낮음

---
## 요약
| 항목 | 열 기반 DB | 행 기반 DB |
|:---|:---|:---|
| 저장 방식 | 열 단위 저장 | 행 단위 저장 |
| 장점 | 빠른 분석, 고압축 | 빠른 트랜잭션, 단일 조회 |
| 단점 | 단일 Row 처리 느림 | 대량 집계 느림 |
| 주요 용도 | OLAP (분석용) | OLTP (운영용) |
