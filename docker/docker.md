
## Docker와 VM의 차이

| 구분           | Docker                                         | VM (가상 머신)                               |
|---------------|------------------------------------------------|---------------------------------------------|
| 아키텍처       | 호스트 OS 위에 **컨테이너 엔진** 실행            | 하이퍼바이저 위에 **게스트 OS** 실행            |
| 커널 공유      | 호스트 OS의 커널을 공유하여 경량 프로세스 격리    | 각 VM이 독립적인 OS와 커널을 포함               |
| 성능           | 경량, 빠른 시작 시간                            | 무겁고 시작 시간이 비교적 느림                 |
| OS 종속성      | 동일 커널 기반(일반적으로 리눅스), Windows 컨테이너는 Windows Server 필요 | 각 VM이 별도의 OS를 가지므로 다양한 OS 사용 가능 |
| 자원 활용       | **공유 커널**로 인해 메모리 및 CPU 사용 효율적    | 각 VM이 독립적인 OS를 가지므로 오버헤드 발생     |
| 격리 수준       | 프로세스 수준 격리 (커널 공유, 네임스페이스 사용) | 완전한 OS 격리 (하드웨어 수준)                   |
| 이미지 크기     | 작고 경량 (수백 MB 수준)                         | 크고 무거움 (수 GB 수준)                        |
| 배포 및 관리    | Docker 이미지로 쉽게 배포 가능                   | VM 이미지는 복잡하고 크기가 큼                 |
| 보안 수준       | 커널 공유로 인해 보안 취약점이 호스트와 컨테이너에 동시에 영향을 줄 수 있음 | 각 VM이 독립된 커널을 가지므로 높은 보안성        |
| 사용 사례       | **마이크로서비스**, CI/CD 파이프라인, 경량 애플리케이션 | **다양한 OS 테스트**, 기존 서버 애플리케이션 호스팅 |

![container_vs_vm.png](container_vs_vm.png)

### 추가 

1. **아키텍처**  
   - Docker는 호스트 OS의 커널을 공유하며, 각 컨테이너는 사용자 공간에서 독립된 프로세스로 실행된다. 
   - VM은 하이퍼바이저를 통해 각 게스트 OS가 독립된 커널을 포함하여 실행된다.
     - **하이퍼바이저란?** 
     - 물리 하드웨어(CPU, 메모리, 디스크 등)와 가상 머신(VM) 사이에 위치해서, 하드웨어 자원을 가상 머신끼리 나누어 쓰게 관리하고 조정하는 소프트웨어 계층


2. **성능 및 자원 활용**  
   - Docker는 호스트 OS의 커널을 공유하므로, VM에 비해 메모리와 CPU 사용이 적다.
   - 애플리케이션 실행 속도가 빠르며, 배포 및 관리가 용이하다.


3. **격리 수준**  
   - Docker 컨테이너는 호스트 OS의 커널을 공유하면서 네임스페이스와 cgroups를 이용해 프로세스 수준 격리를 제공한다.
     - kernel: 컨테이너들이 공유하는 리눅스 운영체제 핵심 
     - namespace: 컨테이너 별로 자원(프로세스, 네트워크 등) 격리 
     - cgroups: 컨테이너 별로 자원 사용량 제한 및 통제 
   - Docker 컨테이너는 호스트 OS의 커널을 공유하므로, 커널에 취약점이 있을 경우 모든 컨테이너가 영향을 받을 수 있다.
   - VM은 하이퍼바이저를 통해 완전한 OS 격리를 제공하여 보안성이 높다.
   
### 결론?
Docker와 VM은 각각의 장단점이 있으므로, **사용 목적과 환경**에 따라 적절한 선택이 필요하다.

