# Embulk 

## 1. 개요
엠벌크는 사실 쿼리 기반의 배치(Query-based Batch) 방식이다. 로그를 읽는 CDC와는 기술적 메커니즘이 다르지만, 실제 구축 현장에서는 이 두 방식을 상호 보완적으로 묶어서 사용한다.

그 이유는 실시간 변경분만 추적하는 CDC의 특성상, 데이터 동기화의 **'시작점'**을 만들기 위해서는 전체 데이터를 한 번 밀어 넣어주는 벌크 로더가 반드시 필요하기 때문이다.
(때문에 Embulk 또한 CDC 항목에 정리한다.)

## 2. 방식별 상세 비교

| 구분 | Log-based CDC (실시간 추적) | Query-based Batch (대용량 배치) |
| --- | --- | --- |
| **대표 도구** | Debezium, GoldenGate, Canal | **Embulk**, Sqoop |
| **작동 원리** | DB 로그(Binlog, Redo Log)를 읽어 변경분 추출 | `SELECT * FROM ...` 쿼리로 데이터 직접 추출 |
| **장점** | 소스 DB 부하 최소화, 삭제 데이터 추적 가능 | 설정이 간편하고 초기 대량 데이터 전송에 특화 |
| **단점** | 설정이 복잡하고 과거 데이터 전체 이관에 부적합 | 실행 시 소스 DB 부하 발생, 중간 변경 이력 유실 |

## 3. 그럼 언제 사용하면 좋을까?
- **초기 적재:** CDC 시스템을 처음 가동할 때, 소스 DB에 이미 존재하는 수년 치의 데이터를 타겟으로 한꺼번에 옮기는 역할
* **재동기화:** CDC 파이프라인이 꼬이거나 로그가 유실되어 데이터 정합성이 깨졌을 때, 특정 테이블을 통째로 다시 부어 정합성을 맞추는 용도

## 4. 결론 및 주의사항

- **부하 관리:** 엠벌크는 쿼리를 날려 데이터를 긁어가므로 운영 DB 성능에 영향을 준다. 따라서 CDC 로그는 Master에서 읽더라도, 초기 적재용 엠벌크는 **Slave(Read Replica)**에서 실행하는 것이 안전하다.
- **병렬 처리:** 엠벌크는 자체적으로 병렬 처리를 지원하므로, 네트워크 대역폭이 허용하는 한 CDC보다 훨씬 빠르게 초기 데이터를 옮길 수 있다.
