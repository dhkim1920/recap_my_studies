
> 이 문서는 링크를 요약한 내용입니다.
> https://www.systemdesignhandbook.com/blog/data-engineer-system-design-interview-questions

### 25가지 필수 데이터 엔지니어 시스템 디자인 인터뷰 질문
각 질문은 확장성, 아키텍처, 지연 시간, 내결함성, 그리고 실제 세계의 trade-offs에 대한 이해도를 테스트하기 위해 설계되었다.


**1. end-to-end 클릭스트림 데이터 파이프라인을 설계하시오:**
고속 데이터 수집, 스트리밍 변환, 그리고 다목적 서빙(BI + ML)을 처리하는 능력을 테스트하는 질문이다.

**2. MySQL에서 Snowflake로의 CDC 시스템을 구축하시오:**
Debezium, Kafka, 스키마 진화, 그리고 정확히 한 번 전송 보장(exactly-once delivery)에 대한 지식을 평가한다.
- 내결함성과 이벤트 순서에 관한 질문이 나올 수 있다.

**3. 실시간 제품 조회를 위한 실시간 분석 대시보드를 설계하시오:**
낮은 지연 시간 처리, 상태 기반 집계(stateful aggregations), 그리고 데이터 신선도 SLA에 대한 추론 능력을 요구한다.
- 이것은 핀테크 및 전자상거래 인터뷰에서 선호되는 주제이다.

**4. 스트리밍과 배치 사용 사례를 모두 지원하는 하이브리드 파이프라인을 구축하시오:**
동일한 데이터를 사용하여 임시 쿼리(ad-hoc queries)와 실시간 메트릭을 지원하는 아키텍처의 유연성을 테스트한다.
- 데이터 플랫폼을 위한 현대적인 시스템 디자인 과제이다.

**5. 머신러닝 및 BI 분석을 위한 레이크하우스를 구축하시오:**
테이블 포맷(Delta, Iceberg), 스키마 진화, ACID 준수, 그리고 데이터 레이아웃에 중점을 둔다.
- 이것은 클라우드 네이티브 직무를 위한 데이터 엔지니어 시스템 디자인 인터뷰 질문에서 떠오르는 주제이다.

**6. 사용자 활동을 위한 스트리밍 세션화(sessionization) 시스템을 만드시오:**
Flink 또는 Spark에서의 windowing 전략에 대한 깊은 이해를 요구한다.
- watermarking과 순서가 맞지 않는 데이터 처리에 대한 심층적인 질문이 나올 수 있다.

**7. 시간당 1TB의 데이터를 처리하는 비용 최적화된 배치 ETL 파이프라인을 설계하시오:**
파티셔닝 전략, 파일 포맷 결정(Parquet/ORC), 그리고 클라우드 비용 트레이드오프를 테스트한다.
- 이것은 효율성이 핵심인 인터뷰에서 자주 등장한다.

**8. 온라인 추론을 위한 피처 스토어(feature store) 수집 파이프라인을 구축하시오:**
낮은 지연 시간의 쓰기, 버전 관리되는 피처, 그리고 스키마 거버넌스를 처리하는 능력을 시험한다.
- MLOps 중심의 데이터 엔지니어 시스템 디자인 인터뷰 질문에서 주제이다.

**9. 장애 조치(failover) 기능이 있는 다중 지역 데이터 복제 파이프라인을 설계하시오:**
AZ 간/Kafka 복제, 지연 시간 처리, 그리고 일관성 트레이드오프에 중점을 둔다.

**10. 로그 기반 이벤트 소싱 아키텍처를 만드시오:**
불변성, 순서 보장, 그리고 Kafka 기반의 특정 시점 조회(time travel queries)에 대한 지식을 테스트한다.
- 재처리 및 스키마 진화에 대한 질문이 나올 수 있다.

**11. 시간 경과에 따른 스키마 진화를 지원하는 CDC 파이프라인을 설계하시오:**
호환되지 않는 스키마 변경, 폴백(fallback) 로직, 그리고 주요 업데이트(breaking updates)를 처리하는 접근 방식을 확인한다.

**12. 여러 이벤트 소스에 걸쳐 데이터를 병합하고 중복을 제거하는 데이터 파이프라인을 구축하시오:**
Upserts, 멱등성(idempotency), 그리고 이벤트 핑거프린팅에 대한 추론 능력을 강조한다.
- 복잡한 실제 데이터 시나리오에서 매우 중요합니다.

**13. GDPR을 준수하는 삭제 기능이 있는 데이터 파이프라인을 구축하시오:**
데이터 계보(lineage)를 유지하면서 분석 저장소의 기록을 삭제하는 능력을 평가한다.

**14. 스키마 유효성 검사 및 강제 적용을 지원하는 파이프라인을 설계하시오:**
Protobuf 또는 Avro 스키마 레지스트리 및 스키마 강제 적용 게이트에 대한 접근 방식을 평가한다.
- 규제가 심한 산업에서 매우 관련성이 높다.

**15. 파이프라인 신선도와 데이터 지연을 실시간으로 추적하는 파이프라인을 구축하시오:**
이 주제는 운영 가시성과 SLA에 중점을 두며, 프로덕션 준비가 된 시스템의 핵심이다.
- 모니터링은 데이터 엔지니어 시스템 디자인 인터뷰 질문에서 필수적인 주제이다.

**16. 버전 관리된 데이터셋과 재현성을 지원하는 파이프라인을 설계하시오:**
과거 데이터 접근, 특정 시점 쿼리, 그리고 데이터셋 해싱을 관리하는 능력을 시험한다.

**17. 타사 수집 API를 위한 재시도 및 백오프(backoff) 로직이 있는 파이프라인을 구축하시오:**
복원력, 지수적 백오프(exponential backoff), 데드-레터 큐(dead-letter queues), 그리고 데이터 일관성에 중점을 둔다.
- 물류 및 광고 기술 회사에서 자주 사용된다.

**18. 최소 한 번 이상 전송을 보장하는(at-least-once guarantees) 스트리밍 파이프라인을 구축하시오:**
다운스트림에서 중복을 처리하고 중복 제거 전략을 구현하는 방법을 테스트한다.
- 최소 한 번 이상 전송 보장의 트레이드오프는 반복되는 주제이다.

**19. 2분마다 업데이트되는 BI 대시보드를 제공하는 파이프라인을 설계하시오:**
지연 시간, 캐싱 전략, 그리고 OLAP 쿼리 최적화의 균형을 맞추는 능력을 요구한다.

**20. 파티셔닝과 압축 기능이 있는 데이터 레이크 수집 파이프라인을 구축하시오:**
파티션 키 설계, 쓰기 증폭(write amplification) 문제, 그리고 시간 경과에 따른 쿼리 성능을 테스트한다.
- 클라우드 네이티브 데이터 엔지니어 시스템 디자인 인터뷰 질문에서 흔히 나옵니다.

**21. 파이프라인 전반의 데이터셋에 대한 메타데이터 추적 시스템을 만드시오:**
계보 추적, 스키마 이력, 그리고 파이프라인 관찰 가능성을 구축하는 능력을 시험한다.

**22. 데이터 품질 모니터링 시스템을 설계하시오:**
이상 현상, null 비율, 중복, 그리고 스키마 드리프트를 잡아내는 능력을 테스트한다.
- 경고 임계값과 사고 대응에 대한 질문이 나올 수 있다.

**23. 버전 관리를 통해 백필(backfill)을 처리하는 데이터 플랫폼을 구축하시오:**
과거 데이터 재작성, 감사 추적, 그리고 다운스트림 소비자에게 미치는 영향에 대한 추론 능력을 요구한다.

**24. 정형 및 비정형 데이터를 위한 통합 수집 서비스를 설계하시오:**
JSON, CSV, 이미지, 로그 등을 모두 하나의 흐름에서 처리하는 것과 같은 아키텍처의 범위를 평가한다.

**25. 전 세계 사용자에 걸쳐 분당 천만 개의 이벤트를 처리하도록 확장되는 파이프라인을 구축하시오:**
파티셔닝, autoscaling, 큐 튜닝, 그리고 병목 현상 식별에 대한 지식의 스트레스 테스트이다.

### 인터뷰에서 답변을 구성하는 방법
다음과 같은 검증된 구조를 따르자

**1. 요구사항 명확화**
- 배치, 스트림, 또는 하이브리드인가?
- 데이터 양(분당 이벤트 수, 일일 TB)?
- SLA? 스키마 진화?
- 규제 또는 비즈니스 제약 조건?

**2. 데이터 흐름 정의**
- 소스, 이벤트, 그리고 파티션
- 변환 (상태 비저장/상태 저장)
- 중간 저장소 (큐, 임시 저장소)

**3. 상위 수준 아키텍처 스케치**
- 다음 구성 요소를 포함:
  - 수집
  - 버퍼링 (Kafka, Kinesis)
  - 처리 (Spark, Flink, Beam)
  - 저장소 (Snowflake, Delta, Redshift)
  - 서빙 (BI, APIs)
  - 모니터링 및 경고

**4. 하나의 핵심 구성 요소 심층 분석**
- 예를 들어:
  - Kafka 토픽 디자인
  - Spark 체크포인팅 및 상태
  - 폴백 핸들링이 있는 스키마 레지스트리
  - 레이크하우스에서의 압축 전략

**5. 트레이드오프(Trade-Offs) 언급**
- 모든 시스템 디자인에는 엣지 케이스와 트레이드오프가 있습니다:
  - 정확히 한 번 보장 vs 최소 한 번 이상 보장
  - Avro vs Protobuf
  - 사전 집계 vs 원시 데이터
  - 이벤트 시간 vs 처리 시간

### 샘플 문제

**예시 문제**
- 사용자 클릭 이벤트(분당 1백만 개)를 스트리밍하고, 세션화한 후, 대시보드를 위해 5분마다 웨어하우스에 쓰는 파이프라인을 설계하시오.

**답변 구조**
- **정리:** 분당 1백만 이벤트, 세션 간격 30분, 대시보드는 매분 신선한 데이터를 요구
- **흐름**
  - 12개 파티션이 있는 Kafka
  - 세션 윈도우가 있는 Spark Structured Streaming
  - 배치 마이크로-배칭을 통해 Snowflake에 Upsert
- **트레이드오프**
  - 친숙함과 커넥터 지원을 위해 Flink 대신 Spark 사용
  - 스키마 레지스트리가 있는 Avro
  - `user_id`와 시간으로 파티셔닝
- **모니터링**
  - Prometheus를 통한 지연 메트릭
  - 5분 이상 지연 시 경고
  - S3에 체크포인트 저장


